<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorator="layout/page-layout">

<th:block layout:fragment="content-title-fragment">
    <h1 class="h3 mb-0 text-gray-800">서비스 정보</h1>
</th:block>

<th:block layout:fragment="content-breadcrumb-fragment">
    <!-- Breadcrumb 시작 -->
    <nav aria-label="breadcrumb" class="col-md-12 px-2">
        <h2 class="page_tit">서비스 정보</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a th:href="@{/view/server/service-info}">서버</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">서비스 정보</li>
        </ol>
    </nav>
    <!-- // Breadcrumb 종료 -->
</th:block>

<th:block layout:fragment="content-body-fragment">
    <ul class="col_list col_xl_4">
        <!-- 서버 별 데이터 카운트 -->
        <li>
            <div class="ibox">
                <div class="ibox-title">
                    <h3 class="section_tit">서버 별 데이터 정보</h3>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fas fa-ellipsis-h"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li>
                                <a href="#" class="dropdown-item">BO 센터</a>
                            </li>
                            <li>
                                <a href="#" class="dropdown-item">O3 센터</a>
                            </li>
                            <li>
                                <a href="#" class="dropdown-item">OO사 센터</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="card-body">
                        <canvas id="graph_DATA"></canvas>
                    </div>
                </div>
            </div>
        </li>

        <!-- 서버 별 캐시 카운트 -->
        <li>
            <div class="ibox">
                <div class="ibox-title">
                    <h3 class="section_tit">서버 별 캐시 정보</h3>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fas fa-ellipsis-h"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li>
                                <a href="#" class="dropdown-item">BO 센터</a>
                            </li>
                            <li>
                                <a href="#" class="dropdown-item">O3 센터</a>
                            </li>
                            <li>
                                <a href="#" class="dropdown-item">OO사 센터</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="ibox-content">
                    <canvas id="graph_CACHE"></canvas>
                </div>
            </div>
        </li>
        <li>
            <div class="ibox">
                <div class="ibox-title">
                    <h3 class="section_tit">서버 별 동기화 진행 정보</h3>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fas fa-ellipsis-h"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li>
                                <a href="#" class="dropdown-item">BO 센터</a>
                            </li>
                            <li>
                                <a href="#" class="dropdown-item">O3 센터</a>
                            </li>
                            <li>
                                <a href="#" class="dropdown-item">OO사 센터</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="ibox-content">
                    <canvas id="graph_SYNC_CNT"></canvas>
                </div>
            </div>
        </li>
    </ul>

<!--    <div class="row px-3 py-1">-->
<!--        <div class="ibox col-md-12">-->
<!--            <div class="ibox-title">-->
<!--                <h3 class="section_tit">JIMAP Admin 서버 등록 정보</h3>-->
<!--                <div class="ibox-tools">-->
<!--                    <a class="collapse-link">-->
<!--                        <i class="fa fa-chevron-up"></i>-->
<!--                    </a>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="ibox-content">-->
<!--                <div class="card-body">-->
<!--                    <div class="text-left">-->
<!--                        <p>-->
<!--                            서비스 버전 정보 : <span>3.4</span><br/>-->
<!--                            JiMap Web Server 와 같이 사용하는 소프트웨어의 라이선스 정보와 버전 정보는 아래를 참고하시길 바랍니다.-->
<!--                        </p>-->
<!--                        <hr/>-->
<!--                        <table id="list_table" class="table table-sm basic">-->
<!--                            <thead class="table-info">-->
<!--                            <tr>-->
<!--                                <th scope="col" class="text-center">소프트웨어 이름</th>-->
<!--                                <th scope="col" class="text-center">버전</th>-->
<!--                                <th scope="col" class="text-center">라이선스 종류</th>-->
<!--                            </tr>-->
<!--                            </thead>-->
<!--                            <tbody>-->
<!--                            <tr th:each="service : ${services}">-->
<!--                                <td class="text-center align-middle">-->
<!--                                    <span th:text="${ service.container }">-->
<!--                                        [CONTAINER NAME]-->
<!--                                    </span>-->
<!--                                </td>-->
<!--                                <td class="text-center align-middle">-->
<!--                                    <span th:text="${ service.version }">-->
<!--                                        [CONTAINER VERSION]-->
<!--                                    </span>-->
<!--                                </td>-->
<!--                                <td class="text-center align-middle">-->
<!--                                    <span th:text="${ service.license }">-->
<!--                                        [CONTAINER LICENSE]-->
<!--                                    </span>-->
<!--                                </td>-->
<!--                            </tr>-->
<!--                            </tbody>-->
<!--                        </table>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

    <script>
        var chartColors = {
            red: 'rgb(255, 99, 132)',
            pink: 'rgb(255, 194, 218)',
            orange: 'rgb(255, 159, 64)',
            yellow: 'rgb(255, 205, 86)',
            green: 'rgb(75, 192, 192)',
            blue: 'rgb(54, 162, 235)',
            skyblue: 'rgb(122, 213, 235)',
            purple: 'rgb(153, 102, 255)',
            grey: 'rgb(201, 203, 207)'
        };

        var color = Chart.helpers.color;
        var barChartData_DATA = {
            labels: ['MAP', 'LAYER', 'SYMBOL'],
            datasets: [{
                label: '서버 1',
                backgroundColor: color(chartColors.red).alpha(0.5).rgbString(),
                borderColor: chartColors.red,
                borderWidth: 1,
                data: [
                    10, 20, 30
                ]
            }, {
                label: '서버 2',
                backgroundColor: color(chartColors.blue).alpha(0.5).rgbString(),
                borderColor: chartColors.blue,
                borderWidth: 1,
                data: [
                    10, 8, 23
                ]
            }, {
                label: 'CDS',
                backgroundColor: color(chartColors.green).alpha(0.5).rgbString(),
                borderColor: chartColors.green,
                borderWidth: 1,
                data: [
                    50, 46, 40
                ]
            }]
        };

        var barChartData_CACHE = {
            labels: ['LAYERS', 'CACHES', 'SEEDS'],
            datasets: [{
                label: '서버 1',
                backgroundColor: color(chartColors.red).alpha(0.5).rgbString(),
                borderColor: chartColors.red,
                borderWidth: 1,
                data: [
                    10, 20, 15
                ]
            }, {
                label: '서버 2',
                backgroundColor: color(chartColors.blue).alpha(0.5).rgbString(),
                borderColor: chartColors.blue,
                borderWidth: 1,
                data: [
                    10, 11, 13
                ]
            }, {
                label: 'CDS',
                backgroundColor: color(chartColors.green).alpha(0.5).rgbString(),
                borderColor: chartColors.green,
                borderWidth: 1,
                data: [
                    12, 13, 14
                ]
            }]
        };

        var barChartData_SYNC_CNT = {
            labels: ['데이터베이스', '파일'],
            datasets: [{
                label: '서버 1',
                backgroundColor: color(chartColors.red).alpha(0.5).rgbString(),
                borderColor: chartColors.red,
                borderWidth: 1,
                data: [
                    8, 9
                ]
            }, {
                label: '서버 2',
                backgroundColor: color(chartColors.blue).alpha(0.5).rgbString(),
                borderColor: chartColors.blue,
                borderWidth: 1,
                data: [
                    6, 7
                ]
            }, {
                label: 'CDS',
                backgroundColor: color(chartColors.green).alpha(0.5).rgbString(),
                borderColor: chartColors.green,
                borderWidth: 1,
                data: [
                    7, 8
                ]
            }]
        };

        window.onload = function() {
            new Chart(document.getElementById('graph_DATA').getContext('2d'), {
                type: 'bar',
                data: barChartData_DATA,
                options: {
                    responsive: true,
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'BO 파일 보유 현황'
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                suggestedMin: 0,
                                suggestedMax: 50
                            }
                        }]
                    }
                }
            });

            new Chart(document.getElementById('graph_CACHE').getContext('2d'), {
                type: 'bar',
                data: barChartData_CACHE,
                options: {
                    responsive: true,
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'BO 캐시 파일 보유 현황'
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                suggestedMin: 0,
                                suggestedMax: 50
                            }
                        }]
                    }
                }
            });

            new Chart(document.getElementById('graph_SYNC_CNT').getContext('2d'), {
                type: 'bar',
                data: barChartData_SYNC_CNT,
                options: {
                    responsive: true,
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'BO 동기화 진행 빈도 현황'
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                suggestedMin: 0,
                                suggestedMax: 50
                            }
                        }]
                    }
                }
            });

            initialize_small_dataTable('list_table');
        };
    </script>
</th:block>

<th:block layout:fragment="custom-html-link">
    <link rel="stylesheet" th:href="@{/design-park/resource/library/css/plugins/dataTables/datatables.min.css}">
</th:block>

<th:block layout:fragment="custom-html-script">
    <script th:src="@{/design-park/resource/library/js/plugins/dataTables/datatables.min.js}"></script>
    <script th:src="@{/design-park/resource/library/js/plugins/dataTables/dataTables.bootstrap4.min.js}"></script>
    <script th:src="@{/design-park/resource/library/js/plugins/chartJs/Chart.min.js}"></script>
</th:block>
</html>